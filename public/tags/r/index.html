

<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.48" />
  <meta name="author" content="Chuliang Xiao">

  
  
  
  
  <meta name="description" content="Research Fellow">

  
  <link rel="alternate" hreflang="en-us" href="/tags/r/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/blue.css">
  

  

  
  <link rel="alternate" href="/tags/r/index.xml" type="application/rss+xml" title="Chuliang Xiao">
  <link rel="feed" href="/tags/r/index.xml" type="application/rss+xml" title="Chuliang Xiao">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/tags/r/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@theRoyalXiao">
  <meta property="twitter:creator" content="@theRoyalXiao">
  
  <meta property="og:site_name" content="Chuliang Xiao">
  <meta property="og:url" content="/tags/r/">
  <meta property="og:title" content="R | Chuliang Xiao">
  <meta property="og:description" content="Research Fellow">
  <meta property="og:locale" content="en-us">
  
  <meta property="og:updated_time" content="2018-06-05T00:00:00&#43;00:00">
  

  

  <title>R | Chuliang Xiao</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Chuliang Xiao</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#publications_selected">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#mentoring">
            
            <span>Mentoring</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>





<div class="universal-wrapper">

  <h1>R</h1>

  

  
  
  <div>
    <h2><a href="/post/sparse-matrix-and-dummy-variables/">Sparse Matrix and Dummy Variables</a></h2>
    <div class="article-style">
      
      <p>Why sparse matrix?</p>

<p>XGBoost only works with matrices that contain all numeric variables; consequently, we need to one-hot encode our data. (UC Business Analytics R Programming Guide)
caret::preProcess uses bagging regression trees for missing values recovery (Yevhen Vasylenko), which requires all numeric variables.</p>

<p>There are different ways to do this in R.</p>

<p>library(tidyverse)
dd &lt;- data.frame(a = gl(3,4), b = gl(4,1,12), c = 1:12, d = sample(c(&quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;), 12, replace = TRUE))
str(dd)</p>

<h2 id="39-data">&#39;data.</h2>

      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/database-with-r-postgresql/">Database with R: PostgreSQL</a></h2>
    <div class="article-style">
      
      <p>Load library
library(tidyverse)
library(RPostgres)
library(DBI)</p>

<p>Connect to PostgreSQL</p>

<p>Connect Method 1 with RPostgres
con1 &lt;- DBI::dbConnect(RPostgres::Postgres(), dbname = &quot;testdb1&quot;,
password = rstudioapi::askForPassword(&quot;Database password&quot;))
dbListTables(con1)
#dbWriteTable(con1, &quot;mtcars&quot;, mtcars)
#dbWriteTable(con1, &quot;flights&quot;, nycflights13::flights)
rstudioapi::askForPassword requires the password input</p>

<p>In the command line (or block-run), there will be popout dialog to input password,</p>

<p>In the knit mode, render the RMarkdown file as follows:
rmarkdown::render(&quot;MyDocument.Rmd&quot;, params = &quot;ask&quot;)
See Parameter User Interfaces
In the blogdown, server_site will halt at the above block.</p>

      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/time-series-analysis-ii-zoo/">Time Series Analysis II: zoo</a></h2>
    <div class="article-style">
      
      <p>zoo: S3 Infrastructure for Regular and Irregular Time Series (Z’s Ordered Observations)</p>

<p>An S3 class with methods for totally ordered indexed observations. It is particularly aimed at irregular time series of numeric vectors/matrices and factors. zoo’s key design goals are independence of a particular index/date/time class and consistency with ts and base R by providing methods to extend standard generics</p>

<p>Base Time-Series Objects stats::ts
Credit: Time Series Analysis in R Part 1: The Time Series Object by DataSciencePlus</p>

      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/us-state-and-county-choropleth-map-heatmap/">US State and County Choropleth Map (Heatmap)</a></h2>
    <div class="article-style">
      
      <p>In this #TidyTuesday post, I try to show an example of putting together six common geographic visualization methods of heat map or choropleth map.</p>

<p>Code is available on GitHUB</p>

<p>Counties</p>

<p>Map data from mpas</p>

<p>Corrected to match with American Community Survey (ACS)</p>

<p>COUNS (48 states an DC)</p>

<p>Map data from albersusa</p>

<p>50 States and DC</p>

<p>Using R6 class choroplethr</p>

<p>50 States and DC</p>

      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/time-series-analysis-i-date-and-time/">Time Series Analysis I: date and time </a></h2>
    <div class="article-style">
      
      <p>Date class from base::Date and lubridate
d1 &lt;- Sys.Date()
d1; class(d1)</p>

<h2 id="1-quot-2018-09-12-quot">[1] &quot;2018-09-12&quot;</h2>

<h2 id="1-quot-date-quot">[1] &quot;Date&quot;</h2>

<p>dates &lt;- c(&quot;02/27/92&quot;, &quot;02/27/92&quot;, &quot;01/14/92&quot;)
dd &lt;- as.Date(dates, &quot;%m/%d/%y&quot;)
dd; class(dd)</p>

<h2 id="1-quot-1992-02-27-quot-quot-1992-02-27-quot-quot-1992-01-14-quot">[1] &quot;1992-02-27&quot; &quot;1992-02-27&quot; &quot;1992-01-14&quot;</h2>

<h2 id="1-quot-date-quot-1">[1] &quot;Date&quot;</h2>

<p>d2 &lt;- lubridate::as_date(&quot;2018-07-05&quot;)
d2; class(d2)</p>

<h2 id="1-quot-2018-07-05-quot">[1] &quot;2018-07-05&quot;</h2>

<h2 id="1-quot-date-quot-2">[1] &quot;Date&quot;</h2>

<p>POSIX* class from base::as.POSIX*
POSIXt types, POSIXct and POSIXlt:</p>

<p>ct, calendar time, stores the number of seconds since the origin</p>

<p>lt, local time, keeps the date as a list of time attributes (such as ”hour” and ”mon”).</p>

      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/r-spatial-data-analysis-4-stars/">R Spatial Data Analysis 4: stars</a></h2>
    <div class="article-style">
      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/r-spatial-data-analysis-3-simple-features/">R Spatial Data Analysis 3: Simple Features </a></h2>
    <div class="article-style">
      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/r-spatial-data-analysis-2-spatial-class/">R Spatial Data Analysis 2: Spatial Class</a></h2>
    <div class="article-style">
      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/r-spatial-data-analysis-1-from-data-to-spatial-data/">R Spatial Data Analysis 1: from Data to Spatial Data</a></h2>
    <div class="article-style">
      
      As much as R is popular in data analysis, R becomes more and more favored in geospatial analysis and visualization.
To introduce spatial data, let first start with comman data. Basic R data types: vector, factor, matrix, data.frame, and list.
Data and Plots
There are many ways to munipulate and visualize data in R, including, typically, the basic and the tidyverse framework. Let’s warm up with plotting data.frame.
basic plot
attach(mtcars)
par(mfrow = c(1,2))
plot(mpg, wt, main = &quot;wt vs.
      
    </div>
  </div>
  
  <div>
    <h2><a href="/post/comparison-sort-order-and-arrange/">Comparison: sort, order and arrange</a></h2>
    <div class="article-style">
      
      <p>vector (or factor)</p>

<p>(x &lt;- swiss$Education[1:20])</p>

<h2 id="1-12-9-5-7-15-7-7-8-7-13-6-12-7-12-5-2-8-28-20-9">[1] 12 9 5 7 15 7 7 8 7 13 6 12 7 12 5 2 8 28 20 9</h2>

<h1 id="sort-the-vector">sort the vector</h1>

<p>sort(x)</p>

<h2 id="1-2-5-5-6-7-7-7-7-7-8-8-9-9-12-12-12-13-15-20-28">[1] 2 5 5 6 7 7 7 7 7 8 8 9 9 12 12 12 13 15 20 28</h2>

<h1 id="partial-sorting">partial sorting</h1>

<p>sort(x, partial = c(10, 15))</p>

<h2 id="1-2-5-5-7-7-7-7-6-7-8-8-9-9-12-12-12-13-28-20-15">[1] 2 5 5 7 7 7 7 6 7 8 8 9 9 12 12 12 13 28 20 15</h2>

<p>Partial sorting in R is different with that in Wikipedia.</p>

      
    </div>
  </div>
  

  
<nav>
  <ul class="pager">
    
    
    <li><a href="/tags/r/page/2/">&gt;</a></li>
    
  </ul>
</nav>



</div>
<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 Chuliang Xiao &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    <script async defer src="//maps.googleapis.com/maps/api/js?key="></script>
    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.25/gmaps.min.js" integrity="sha256-7vjlAeb8OaTrCXZkCNun9djzuB2owUsaO72kXaFDBJs=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>



